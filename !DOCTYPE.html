<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SmartTimer æ™ºèƒ½å°ˆæ³¨æ™‚å…‰</title>
    <style>
        :root {
            --bg-color: #FFF8E1; /* æŸ”å’Œå¥¶èŒ¶è‰²èƒŒæ™¯ */
            --primary-color: #8D6E63; /* æº«æš–æ£•è‰² */
            --accent-color: #AED581; /* æŸ”å’Œè‰ç¶  */
            --card-bg: #FFFFFF;
            --text-color: #5D4037;
            --shadow: 0 4px 12px rgba(141, 110, 99, 0.15);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            margin: 0; padding: 0;
            font-family: 'PingFang TC', 'Microsoft JhengHei', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden; /* é˜²æ­¢æ•´é«”æ»¾å‹•ï¼Œç”±å…§å®¹å€æ»¾å‹• */
        }

        /* é ‚éƒ¨å°èˆª */
        .header {
            padding: 20px;
            text-align: center;
            font-weight: bold;
            font-size: 1.2rem;
            background: var(--bg-color);
            z-index: 10;
        }

        /* é‡‘å¹£é¡¯ç¤º */
        .coin-display {
            display: inline-flex;
            align-items: center;
            background: #FFF;
            padding: 5px 15px;
            border-radius: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        .coin-icon { color: #FFD54F; margin-right: 5px; }

        /* ä¸»è¦å…§å®¹å€ */
        .main-content {
            flex: 1;
            overflow-y: auto;
            padding: 0 20px 80px 20px; /* åº•éƒ¨ç•™ç™½çµ¦å°èˆªåˆ— */
        }

        /* åˆ†é åˆ‡æ› */
        .page { display: none; animation: fadeIn 0.3s ease; }
        .page.active { display: block; }

        /* å¡ç‰‡æ¨£å¼ */
        .card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
            text-align: center;
        }

        /* å¯µç‰©å€ */
        .pet-area {
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            position: relative;
        }
        .pet-emoji { font-size: 4rem; animation: bounce 2s infinite; }
        .pet-message { 
            background: #E1F5FE; 
            padding: 8px 12px; 
            border-radius: 12px; 
            font-size: 0.85rem; 
            margin-top: 10px;
            position: relative;
        }
        .pet-message::after {
            content: ''; position: absolute; top: -5px; left: 50%;
            margin-left: -5px; border-width: 0 5px 5px;
            border-style: solid; border-color: #E1F5FE transparent;
        }

        /* è¨ˆæ™‚å™¨ */
        .timer-circle {
            width: 180px; height: 180px;
            border-radius: 50%;
            border: 8px solid var(--accent-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary-color);
            margin: 20px auto;
        }

        /* æŒ‰éˆ• */
        .btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
            transition: transform 0.1s;
        }
        .btn:active { transform: scale(0.98); }
        .btn-outline { background: transparent; border: 2px solid var(--primary-color); color: var(--primary-color); }

        /* å•†åº—åˆ—è¡¨ */
        .shop-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .shop-item { 
            background: #FFF; border-radius: 15px; padding: 15px; 
            box-shadow: var(--shadow); text-align: center;
        }
        .shop-img { font-size: 2.5rem; display: block; margin-bottom: 5px; }

        /* å¥½å‹åˆ—è¡¨ */
        .friend-row {
            display: flex; justify-content: space-between; align-items: center;
            padding: 12px 0; border-bottom: 1px solid #EEE;
        }
        .rank-badge { 
            width: 24px; height: 24px; background: #FFD54F; 
            color: white; border-radius: 50%; text-align: center; line-height: 24px; font-size: 0.8rem;
        }

        /* åº•éƒ¨å°èˆªåˆ— */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: #FFF;
            display: flex;
            justify-content: space-around;
            padding: 15px 0;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
        }
        .nav-item {
            text-align: center; color: #CCC; font-size: 0.8rem;
            cursor: pointer;
        }
        .nav-item.active { color: var(--primary-color); font-weight: bold; }
        .nav-icon { display: block; font-size: 1.5rem; margin-bottom: 3px; }

        /* å‹•ç•« */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

        /* å¿ƒç†æ¸¬é©— Modal */
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 100;
            justify-content: center; align-items: center;
        }
        .modal-content {
            background: #FFF; width: 85%; padding: 25px; border-radius: 20px;
            text-align: center;
        }
    </style>
</head>
<body>

    <div class="header">
        <div class="coin-display">
            <span class="coin-icon">ğŸ’°</span> <span id="coin-count">400</span>
        </div>
        <div id="header-title">å°ˆæ³¨ä¹‹å³¶</div>
    </div>

    <div class="main-content">
        
        <div id="home-page" class="page active">
            <div class="card pet-area">
                <div class="pet-emoji">ğŸ¹</div> <div class="pet-message" id="pet-msg">ä¸»äººï¼Œä»Šå¤©è¦è®€å¾®ç©åˆ†å—ï¼Ÿæˆ‘æœƒé™ªè‘—ä½ ï¼</div>
            </div>

            <div class="card">
                <h3>å°ˆæ³¨è¨ˆæ™‚</h3>
                <div class="timer-circle" id="timer-display">25:00</div>
                <button class="btn" onclick="toggleTimer()">é–‹å§‹å°ˆæ³¨</button>
                <button class="btn btn-outline" style="margin-top:10px" onclick="openTest()">ğŸ”® å¿ƒç†æ¸¬é©—ï¼šé©åˆç’°å¢ƒ</button>
            </div>
        </div>

        <div id="shop-page" class="page">
            <h3 style="margin-left: 5px;">ç™¾è²¨å•†åº— ğŸ </h3>
            <p style="font-size: 0.9rem; color: #888; margin-bottom: 15px;">ç´¯ç©å°ˆæ³¨ 50 å°æ™‚è§£é–æ›´å¤šå•†å“ </p>
            <div class="shop-grid">
                <div class="shop-item">
                    <span class="shop-img">ğŸŒ»</span>
                    <div>è±ªè¯ç¨®å­ç¢—</div>
                    <small>200 é‡‘å¹£</small>
                    <button class="btn" style="padding: 5px; font-size: 0.8rem; margin-top:5px">è³¼è²·</button>
                </div>
                <div class="shop-item">
                    <span class="shop-img">ğŸ“</span>
                    <div>å­¸å£«å¸½</div>
                    <small>300 é‡‘å¹£</small>
                    <button class="btn" style="padding: 5px; font-size: 0.8rem; margin-top:5px">è³¼è²·</button>
                </div>
                <div class="shop-item">
                    <span class="shop-img">ğŸ¥</span>
                    <div>å¤¥ä¼´ï¼šå°é›</div>
                    <small>éœ€ 100 å°æ™‚</small>
                    <button class="btn btn-outline" style="padding: 5px; font-size: 0.8rem; margin-top:5px" disabled>é–å®š</button>
                </div>
            </div>
        </div>

        <div id="friend-page" class="page">
            <h3>å¥½å‹å°ˆæ³¨æ¦œ ğŸ†</h3>
            <div class="card">
                <div class="friend-row">
                    <div style="display:flex; align-items:center;">
                        <span class="rank-badge" style="background:#FFD700">1</span>
                        <span style="margin-left:10px; font-weight:bold;">å°æ˜</span>
                    </div>
                    <span>120 hr</span>
                </div>
                <div class="friend-row">
                    <div style="display:flex; align-items:center;">
                        <span class="rank-badge" style="background:#C0C0C0">2</span>
                        <span style="margin-left:10px;">é˜¿å¼·</span>
                    </div>
                    <span>85 hr</span>
                </div>
                <div class="friend-row">
                    <div style="display:flex; align-items:center;">
                        <span class="rank-badge" style="background:#CD7F32">3</span>
                        <span style="margin-left:10px;">æˆ‘ (å¸ƒä¸)</span>
                    </div>
                    <span style="color:var(--primary-color); font-weight:bold;">48 hr</span>
                </div>
            </div>
            <button class="btn btn-outline">ï¼‹ é‚€è«‹å¥½å‹</button>
        </div>

        <div id="task-page" class="page">
            <h3>ä»Šæ—¥ä»»å‹™æ¸…å–® ğŸ“</h3>
            <div class="card" style="text-align:left;">
                <input type="checkbox" checked> å¾ªç’°1ï¼šå¾®ç©åˆ†ç¿’é¡Œ <br><br>
                <input type="checkbox"> å¾ªç’°2ï¼šè‹±æ–‡å–®å­— L5<br><br>
                <input type="checkbox"> å¾ªç’°3ï¼šç¨‹å¼è¨­è¨ˆä½œæ¥­
            </div>
            <h3>è¨­å®š</h3>
            <button class="btn btn-outline">åˆ‡æ›å¯µç‰© (ç‹—/è²“/çƒé¾œ)</button>
        </div>

    </div>

    <div class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('home', this)">
            <span class="nav-icon">â±ï¸</span>å°ˆæ³¨
        </div>
        <div class="nav-item" onclick="switchTab('shop', this)">
            <span class="nav-icon">ğŸ </span>å•†åº—
        </div>
        <div class="nav-item" onclick="switchTab('friend', this)">
            <span class="nav-icon">ğŸ‘¥</span>å¥½å‹
        </div>
        <div class="nav-item" onclick="switchTab('task', this)">
            <span class="nav-icon">ğŸ“</span>ä»»å‹™
        </div>
    </div>

    <div id="test-modal" class="modal">
        <div class="modal-content">
            <h3>å¿ƒéˆç¾…ç›¤ ğŸ§­</h3>
            <p>æ‚¨ç¾åœ¨å–œæ­¡å®‰éœé‚„æ˜¯æœ‰é»è²éŸ³ï¼Ÿ</p>
            <button class="btn" onclick="closeTest('æ£®æ—åœ–æ›¸é¤¨')">å®‰éœ (åœ–æ›¸é¤¨)</button>
            <button class="btn btn-outline" style="margin-top:10px" onclick="closeTest('Lo-fi å’–å•¡å»³')">æœ‰é»è²éŸ³ (å’–å•¡å»³)</button>
        </div>
    </div>

    <script>
        // åˆ‡æ›åˆ†é åŠŸèƒ½
        function switchTab(tabName, element) {
            // éš±è—æ‰€æœ‰é é¢
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            // é¡¯ç¤ºç›®æ¨™é é¢
            document.getElementById(tabName + '-page').classList.add('active');
            
            // æ›´æ–°å°èˆªæ¨£å¼
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            element.classList.add('active');

            // æ›´æ–°æ¨™é¡Œ
            const titles = {'home': 'å°ˆæ³¨ä¹‹å³¶', 'shop': 'å•†åº—è¡—', 'friend': 'å¥½å‹æ’è¡Œ', 'task': 'ä»»å‹™æ¸…å–®'};
            document.getElementById('header-title').innerText = titles[tabName];
        }

        // ç°¡æ˜“è¨ˆæ™‚å™¨é‚è¼¯
        let timer;
        let isRunning = false;
        let timeLeft = 25 * 60; // 25åˆ†é˜

        function toggleTimer() {
            const btn = event.target;
            const display = document.getElementById('timer-display');
            const msg = document.getElementById('pet-msg');

            if (!isRunning) {
                // é–‹å§‹
                isRunning = true;
                btn.innerText = "æ”¾æ£„ (æœƒè®Šé»‘éœ§!)";
                btn.style.backgroundColor = "#e57373"; // è­¦å‘Šè‰²
                msg.innerText = "å™“... å¸ƒä¸æ­£åœ¨çœ‹è‘—ä½ åŠªåŠ›å–”ï¼"; // 
                
                timer = setInterval(() => {
                    timeLeft--;
                    let m = Math.floor(timeLeft / 60);
                    let s = timeLeft % 60;
                    display.innerText = `${m}:${s < 10 ? '0'+s : s}`;
                    if (timeLeft <= 0) {
                        clearInterval(timer);
                        alert("å°ˆæ³¨å®Œæˆï¼ç²å¾—é‡‘å¹£ï¼");
                        isRunning = false;
                    }
                }, 1000);
            } else {
                // åœæ­¢
                clearInterval(timer);
                isRunning = false;
                btn.innerText = "é–‹å§‹å°ˆæ³¨";
                btn.style.backgroundColor = "#8D6E63"; // æ¢å¾©åŸè‰²
                msg.innerText = "å—šå—š... é»‘éœ§åˆè¦å›ä¾†äº†..."; // 
                display.innerText = "25:00";
                timeLeft = 25 * 60;
            }
        }

        // å¿ƒç†æ¸¬é©—äº’å‹•
        function openTest() {
            document.getElementById('test-modal').style.display = 'flex';
        }
        function closeTest(result) {
            document.getElementById('test-modal').style.display = 'none';
            document.getElementById('pet-msg').innerText = `æ¨è–¦ç’°å¢ƒï¼š${result} `;
            alert(`å¸ƒä¸æ¨è–¦æ‚¨å‰å¾€ï¼š${result}`);
        }
    </script>
</body>
</html>